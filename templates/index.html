<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Product Admin - Dashboard HTML Template</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;400&display=swap" rel="stylesheet">
    <!-- https:fonts.google.com/specimen/Roboto -->
    <link rel="stylesheet" href="/static/css/fontawesome.min.css">
    <!-- https:fontawesome.com/ -->
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <!-- https:getbootstrap.com/ -->
    <link rel="stylesheet" href="/static/css/templatemo-style.css">
    <!--
	Product Admin template/css Template
	https:templatemo.com/tm-524-product-admin
	-->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
</head>

<body id="reportsPage">
    <div class="" id="home">
        <nav class="navbar navbar-expand-xl">
            <div class="container h-100">
                <a class="navbar-brand" href="/">
                    <h1 class="tm-site-title mb-0">Product Admin</h1>
                </a>
                <button class="navbar-toggler ml-auto mr-0" type="button" data-toggle="collapse"
                    data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <i class="fas fa-bars tm-nav-icon"></i>
                </button>

                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav mx-auto h-100">
                        <li class="nav-item">
                            <a class="nav-link active" href="/index">
                                <i class="fas fa-tachometer-alt"></i>
                                Dashboard
                                <span class="sr-only">(current)</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/aboutUs">
                                <i class="fas fa-info"></i>
                                About Us
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/faqs">
                                <i class="fas fa-info-circle"></i>
                                FAQS
                            </a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="/feedback">
                                <i class="fas fa-comment"></i>
                                Feedback
                            </a>
                        </li>
                        <!-- <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="fas fa-cog"></i>
                                <span>
                                    Settings <i class="fas fa-angle-down"></i>
                                </span>
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <a class="dropdown-item" href="#">Profile</a>
                                <a class="dropdown-item" href="#">Billing</a>
                                <a class="dropdown-item" href="#">Customize</a>
                            </div>
                        </li> -->
                    </ul>
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link d-block" href="/">
                                Admin, <b>Logout</b>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>

        </nav>
        <div class="container">
            <div class="row">
                <div class="col-3"></div>
                <div class="col-6" style="margin-top: 25px;">
                    <form id="form" action="/arabicModel" method="post" class="tm-login-form">
                        <div class="form-group">
                            <input name="search_word" type="text" class="form-control validate" id="search_word"
                                value="" required />
                        </div>
                        <div class="form-group">
                         
                            <div class="form-group mt-4">

                                <button id="submitBtn" type="submit" class="btn btn-primary btn-block text-uppercase">
                                    Scrape & Analyze
                                </button>
                            </div>
                            <div>
                            </div>
                    </form>
                </div>
                <div class="col-3"></div>
            </div>
            <script>

            </script>
            <!-- row -->
            <div class="row tm-content-row">

                <script>
                    function drawLineChart() {
                        if ($("#lineChart").length) {
                            ctxLine = document.getElementById("lineChart").getContext("2d");
                            optionsLine = {
                                scales: {
                                    yAxes: [
                                        {
                                            scaleLabel: {
                                                display: true,
                                                labelString: "Hits"
                                            }
                                        }
                                    ]
                                }
                            };

                            //   Set aspect ratio based on window width
                            optionsLine.maintainAspectRatio =
                                $(window).width() < width_threshold ? false : true;

                            configLine = {
                                type: "line",
                                data: {
                                    labels: [
                                        "January",
                                        "February",
                                        "March",
                                        "April",
                                        "May",
                                        "June",
                                        "July"
                                    ],
                                    datasets: [
                                        {
                                            label: "Latest Hits",
                                            data: [88, 68, 79, 57, 50, 55, 70],
                                            fill: false,
                                            borderColor: "rgb(75, 192, 192)",
                                            cubicInterpolationMode: "monotone",
                                            pointRadius: 0
                                        },
                                        {
                                            label: "Popular Hits",
                                            data: [33, 45, 37, 21, 55, 74, 69],
                                            fill: false,
                                            borderColor: "rgba(255,99,132,1)",
                                            cubicInterpolationMode: "monotone",
                                            pointRadius: 0
                                        },
                                        {
                                            label: "Featured",
                                            data: [44, 19, 38, 46, 85, 66, 79],
                                            fill: false,
                                            borderColor: "rgba(153, 102, 255, 1)",
                                            cubicInterpolationMode: "monotone",
                                            pointRadius: 0
                                        }
                                    ]
                                },
                                options: optionsLine
                            };

                            lineChart = new Chart(ctxLine, configLine);
                        }
                    }
                </script>
                <div class="col-sm-12 col-md-12 col-lg-6 col-xl-6 tm-block-col">
                    <div class="tm-bg-primary-dark tm-block">
                        <h2 class="tm-block-title">Horizontal Bar Chart</h2>
                        <canvas id="barChart"></canvas>
                    </div>
                </div>

                <script>
                    var pos_count = parseInt("{{pos_count}}");
                    var neg_count = parseInt("{{neg_count}}");
                    console.log(pos_count);
                    function drawBarChart() {
                        if ($("#barChart").length) {
                            ctxBar = document.getElementById("barChart").getContext("2d");

                            optionsBar = {
                                responsive: true,
                                scales: {
                                    yAxes: [
                                        {
                                            barPercentage: 0.2,
                                            ticks: {
                                                beginAtZero: true
                                            },
                                            scaleLabel: {
                                                display: true,
                                                labelString: "Hits"
                                            }
                                        }
                                    ]
                                }
                            };

                            optionsBar.maintainAspectRatio =
                                $(window).width() < width_threshold ? false : true;

                            /**
                             * COLOR CODES
                             * Red: #F7604D
                             * Aqua: #4ED6B8
                             * Green: #A8D582
                             * Yellow: #D7D768
                             * Purple: #9D66CC
                             * Orange: #DB9C3F
                             * Blue: #3889FC
                             */

                            configBar = {
                                type: "horizontalBar",
                                data: {
                                    labels: ["Negative", "Positive"],
                                    datasets: [
                                        {
                                            label: "Sentiment",
                                            data: [neg_count, pos_count],
                                            backgroundColor: [
                                                "#F7604D",
                                                "#A8D582",
                                            ],
                                            borderWidth: 0
                                        }
                                    ]
                                },
                                options: optionsBar
                            };

                            barChart = new Chart(ctxBar, configBar);
                        }
                    }
                </script>
                <div class="col-sm-12 col-md-12 col-lg-6 col-xl-6 tm-block-col">
                    <div class="tm-bg-primary-dark tm-block tm-block-taller">
                        <h2 class="tm-block-title">Pie Chart</h2>
                        <div id="pieChartContainer">
                            <canvas id="pieChart" class="chartjs-render-monitor" width="200" height="200"></canvas>
                        </div>
                    </div>
                </div>
                <script>
                    var pos_count = "{{pos_count}}";
                    var neg_count = "{{neg_count}}";
                    function drawPieChart() {
                        if ($("#pieChart").length) {
                            var chartHeight = 300;

                            $("#pieChartContainer").css("height", chartHeight + "px");

                            ctxPie = document.getElementById("pieChart").getContext("2d");

                            optionsPie = {
                                responsive: true,
                                maintainAspectRatio: false,
                                layout: {
                                    padding: {
                                        left: 10,
                                        right: 10,
                                        top: 10,
                                        bottom: 10
                                    }
                                },
                                legend: {
                                    position: "top"
                                }
                            };

                            configPie = {
                                type: "pie",
                                data: {
                                    datasets: [
                                        {
                                            data: [pos_count, neg_count],
                                            backgroundColor: ["#A8D582", "#F7604D"],
                                            label: "Tweets"
                                        }
                                    ],
                                    labels: [
                                        "POS",
                                        "NEG"
                                    ]
                                },
                                options: optionsPie
                            };

                            pieChart = new Chart(ctxPie, configPie);
                        }
                    }

                </script>


                <div class="col-12 tm-block-col">
                    <div class="tm-bg-primary-dark tm-block tm-block-taller tm-block-scroll">
                        <h2 class="tm-block-title">Scraped Data</h2>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th scope="col">User ID</th>
                                    <th scope="col">Tweet</th>
                                    <th scope="col">Likes</th>
                                    <th scope="col">Date</th>
                                    <th scope="col">Analysis</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for tweet in data %}
                                <tr>
                                    <th scope="row"><b>{{tweet.tweetUser}}</b></th>
                                    <td><b>{{tweet.tweetContent}}</b></td>
                                    <td><b>{{tweet.tweetLikeCount}}</b></td>
                                    <td>{{tweet.tweetDate.strftime("%Y-%m-%d %H:%M:%S")}}</td>
                                    <!-- In this if, the logic is to view Negative with its css class to make effect -->
                                    <td>
                                        {% if tweet.tweetProcessed == 0 %}
                                        <div class="tm-status-circle cancelled">
                                        </div>Negative
                                        {% else %}
                                        <div class="tm-status-circle moving">
                                        </div>Positive
                                        {% endif %}
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <footer class="tm-footer row tm-mt-small">
            <div class="col-12 font-weight-light">
                <p class="text-center text-white mb-0 px-4 small">
                    Copyright &copy; <b>2022</b> All rights reserved.
                </p>
            </div>
        </footer>
    </div>

    <!-- https:jquery.com/download/ -->
    <script src="/static/js/moment.min.js"></script>
    <!-- https:momentjs.com/ -->
    <script src="/static/js/Chart.min.js"></script>
    <!-- http:www.chartjs.org/docs/latest/ -->
    <script src="/static/js/bootstrap.min.js"></script>
    <!-- https:getbootstrap.com/ -->
    <script src="/static/js/tooplate-scripts.js"></script>
    <script>
        Chart.defaults.global.defaultFontColor = 'white';
        let ctxLine,
            ctxBar,
            ctxPie,
            optionsLine,
            optionsBar,
            optionsPie,
            configLine,
            configBar,
            configPie,
            lineChart;
        barChart, pieChart;
        //  DOM is ready
        $(function () {
            drawBarChart();  // Bar Chart
            drawPieChart();  // Pie Chart
           
            $(window).resize(function () {
                updateLineChart();
                updateBarChart();
            });
        })
    </script>
</body>

</html>